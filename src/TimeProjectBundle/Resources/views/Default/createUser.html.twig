{% extends 'TimeProjectBundle::layout.html.twig' %}

{% block tilte %} {{ parent() }} - Configuration de la société {% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.13/css/jquery.dataTables.min.css"/>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/1.2.4/css/buttons.dataTables.min.css"/>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/select/1.2.1/css/select.dataTables.min.css"/>
    <link rel="stylesheet" type="text/css" href="{{ asset('bundles/assets/css/datatable/editor.bootstrap.css') }}"/>
{% endblock %}

{% block body %}
    <div id="wrapper">
        {% include 'TimeProjectBundle:Default:nav-menu.html.twig' %}
        <div id="main">
            <div class="inner">
                <table id="example" class="table table-striped table-bordered" cellspacing="0" width="100%">
                    <thead>
                    <tr>
                        <th>Pseudo</th>
                        <th>Adresse email</th>
                        <th>Privilège</th>
                        <th>Id</th>
                    </tr>
                    </thead>

                </table>
            </div>
        </div>
    </div>
{% endblock %}


{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript" language="javascript" src="https://cdn.datatables.net/v/dt/dt-1.10.13/datatables.min.js"></script>
    <script type="text/javascript" language="javascript" src="https://cdn.datatables.net/select/1.2.1/js/dataTables.select.min.js"></script>
    <script type="text/javascript" language="javascript" src="{{ asset('bundles/assets/js/datatable/dataTables.editor.js') }}"></script>
    <script type="text/javascript" language="javascript" src="{{ asset('bundles/assets/js/datatable/editor.bootstrap.js') }}"></script>
    {#<script type="text/javascript" language="javascript" src="{{ asset('bundles/assets/js/bootstrap.min.js') }}"></script>#}
    <script type="text/javascript" language="javascript" src="https://cdn.datatables.net/buttons/1.2.4/js/dataTables.buttons.min.js"></script>
    <script type="text/javascript" language="javascript" src="https://cdn.datatables.net/buttons/1.2.4/js/buttons.bootstrap.min.js"></script>
    <script type="text/javascript" language="javascript">
        var editor; // use a global for the submit and return data rendering in the examples

        $(document).ready(function() {
            editor = new $.fn.dataTable.Editor( {
                ajax: "{{ path('manage_user') }}",
                table: "#example",
                fields: [

                    {
                        label: "Pseudo",
                        name: "username"
                    },
                    {
                        label: "Email",
                        name: "email"
                    },
                    {
                        label: "Privilège:",
                        name:  "role",
                        type:  "select",
                        options: [
                            { label: "UTILISATEUR", value: "UTILISATEUR" },
                            { label: "ADMIN",           value: "ADMIN" }
                        ]
                    },
                    {
                        label: "Id",
                        name: "id",
                        type:  "readonly"
                    }
                ],
                i18n: {
                    create: {
                        "button": "CRÉATION",
                        "submit": "Créer"
                    },
                    edit: {
                        "button": "MODIFIER",
                        "submit": "Modifier"
                    },
                    remove: {
                        "button": "SUPPRIMER",

                        "submit": "Supprimer"
                    }
                }
            } );

            var table = $('#example').DataTable( {
//                bFilter: false,
                lengthChange: false,
                ajax: "{{ path('get_all_users') }}",
                search: false,
                columns: [
                    { data: "username"},
                    { data: "email" },
                    { data: "role" },
                    { data: "id"}
                ],
                "columnDefs": [
                    {
                        "targets": [ 3 ],
                        "visible": false,
                        "searchable": false
                    }
                ],
                select: true,
                language:{
                    "sProcessing":     "Traitement en cours...",
                        "sSearch":         "Rechercher&nbsp;:",
                        "sLengthMenu":     "Afficher _MENU_ &eacute;l&eacute;ments",
                        "sInfo":           "Affichage de l'&eacute;l&eacute;ment _START_ &agrave; _END_ sur _TOTAL_ &eacute;l&eacute;ments",
                        "sInfoEmpty":      "Affichage de l'&eacute;l&eacute;ment 0 &agrave; 0 sur 0 &eacute;l&eacute;ment",
                        "sInfoFiltered":   "(filtr&eacute; de _MAX_ &eacute;l&eacute;ments au total)",
                        "sInfoPostFix":    "",
                        "sLoadingRecords": "Chargement en cours...",
                        "sZeroRecords":    "Aucun &eacute;l&eacute;ment &agrave; afficher",
                        "sEmptyTable":     "Aucune donn&eacute;e disponible dans le tableau",
                        "oPaginate": {
                            "sFirst":      "Premier",
                            "sPrevious":   "Pr&eacute;c&eacute;dent",
                            "sNext":       "Suivant",
                            "sLast":       "Dernier"
                        },
                    "oAria": {
                    "sSortAscending":  ": activer pour trier la colonne par ordre croissant",
                            "sSortDescending": ": activer pour trier la colonne par ordre d&eacute;croissant"
                    }

                }
            });

            // Display the buttons
            new $.fn.dataTable.Buttons( table, [
                { extend: "create", editor: editor },
                { extend: "edit",   editor: editor },
                { extend: "remove", editor: editor }
            ] );


            table.buttons().container().prependTo('#main .inner');
        } );
    </script>
{% endblock %}


