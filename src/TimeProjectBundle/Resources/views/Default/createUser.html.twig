{% extends 'TimeProjectBundle::layout.html.twig' %}

{% block tilte %} {{ parent() }} - Configuration de la société {% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('bundles/assets/css/home.css') }}" />
    <link rel="stylesheet" href="{{ asset('bundles/assets/css/custumhome.css') }}" />
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.13/css/jquery.dataTables.min.css"/>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/1.2.4/css/buttons.dataTables.min.css"/>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/select/1.2.1/css/select.dataTables.min.css"/>
    <link rel="stylesheet" type="text/css" href="{{ asset('bundles/assets/css/bootstrap.min.css') }}"/>
    <link rel="stylesheet" type="text/css" href="{{ asset('bundles/assets/css/datatable/editor.bootstrap.css') }}"/>
{% endblock %}

{% block body %}
    <div id="wrapper">
        <header id="header">
        </header>
        <div id="main">
            <div class="inner">
                <table id="example" class="table table-striped table-bordered" cellspacing="0" width="100%">
                    <thead>
                    <tr>
                        <th>Pseudo</th>
                        <th>Adresse email</th>
                    </tr>
                    </thead>

                </table>
            </div>
        </div>
    </div>
{% endblock %}


{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript" language="javascript" src="https://cdn.datatables.net/v/dt/dt-1.10.13/datatables.min.js"></script>
    <script type="text/javascript" language="javascript" src="https://cdn.datatables.net/select/1.2.1/js/dataTables.select.min.js"></script>
    <script type="text/javascript" language="javascript" src="{{ asset('bundles/assets/js/datatable/dataTables.editor.js') }}"></script>
    <script type="text/javascript" language="javascript" src="{{ asset('bundles/assets/js/datatable/editor.bootstrap.js') }}"></script>
    <script type="text/javascript" language="javascript" src="{{ asset('bundles/assets/js/bootstrap.min.js') }}"></script>
    <script type="text/javascript" language="javascript" src="https://cdn.datatables.net/buttons/1.2.4/js/dataTables.buttons.min.js"></script>
    <script type="text/javascript" language="javascript" src="https://cdn.datatables.net/buttons/1.2.4/js/buttons.bootstrap.min.js"></script>
    <script>
        var editor; // use a global for the submit and return data rendering in the examples

        $(document).ready(function() {
            editor = new $.fn.dataTable.Editor( {
                ajax: "{{ path('manage_user') }}",
                table: "#example",
                fields: [
                   {
                    label: "Pseudo",
                    name: "username"
                    }, {
                    label: "Email",
                    name: "email"
                }],
                i18n: {
                    create: {
                        "button": "CRÉATION",
                        "submit": "Créer"
                    },
                    edit: {
                        "button": "MODIFIER",
                        "submit": "Modifier"
                    },
                    remove: {
                        "button": "SUPPRIMER",

                        "submit": "Supprimer"
                    }
                }
            } );

            var table = $('#example').DataTable( {
                lengthChange: false,
                ajax: "{{ path('get_all_users') }}",
                search: false,
                columns: [
                    { data: "username"},
                    { data: "email" }
                ],
                select: true
            } );

            // Display the buttons
            new $.fn.dataTable.Buttons( table, [
                { extend: "create", editor: editor },
                { extend: "edit",   editor: editor },
                { extend: "remove", editor: editor }
            ] );


            table.buttons().container().prependTo('.inner');
        } );
    </script>
{% endblock %}


